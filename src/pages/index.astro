---
import Base from "../layouts/Base.astro";
import ProductCard from "../components/ProductCard.astro";
import { getCollection } from "astro:content";

const products = await getCollection("products");
const sorted = products.sort((a, b) => (b.data.date ?? "") > (a.data.date ?? "") ? 1 : -1);
---
<Base title="High End Room" description="Exkluzivní výběr luxusního oblečení a doplňků.">
  <!-- HERO -->
  <section
    class="relative flex min-h-[calc(100vh-74px)] flex-col items-center justify-center bg-cover bg-center bg-no-repeat px-4 text-center"
    style={`background-image:
      linear-gradient(rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.8) 50%, rgb(0,0,0) 100%),
      url('/image/pozadi.svg');
    `}
  >
    <h1 class="text-4xl font-black tracking-tighter sm:text-5xl md:text-6xl">High End Room</h1>
    <p class="mx-auto mt-4 max-w-2xl text-base text-gray-300 sm:text-lg">
      Exkluzivní výběr luxusního oblečení a doplňků. Kontaktujte nás pro více informací o produktech a prodeji.
    </p>
    <a href="#catalog" class="mt-8 inline-block rounded-full bg-white px-8 py-3 text-lg font-bold text-black transition-transform duration-300 hover:scale-105">
      Prohlédnout katalog
    </a>
  </section>

  <!-- FILTRY -->
  <section id="catalog" class="mx-auto max-w-7xl px-4 py-10">
    <div class="mb-6 flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
      <div>
        <h2 class="text-2xl font-bold">Katalog</h2>
        <p class="text-sm text-gray-400">Aktuálně {sorted.length} položek</p>
      </div>

      <div class="flex flex-wrap items-center gap-2">
        <div class="flex flex-wrap gap-2 rounded-full bg-white/5 p-1">
          <button data-filter="all" class="filter-btn rounded-full px-4 py-2 text-sm text-white/80 hover:text-white">Vše</button>
          <button data-filter="obuv" class="filter-btn rounded-full px-4 py-2 text-sm text-white/80 hover:text-white">Obuv</button>
          <button data-filter="obleceni" class="filter-btn rounded-full px-4 py-2 text-sm text-white/80 hover:text-white">Oblečení</button>
          <button data-filter="batohy" class="filter-btn rounded-full px-4 py-2 text-sm text-white/80 hover:text-white">Batohy</button>
          <button data-filter="doplnky" class="filter-btn rounded-full px-4 py-2 text-sm text-white/80 hover:text-white">Doplňky</button>
        </div>

        <label class="ml-2 inline-flex cursor-pointer items-center gap-2 rounded-full bg-white/5 px-4 py-2 text-sm">
          <input id="onlyAvailable" type="checkbox" class="accent-white" />
          Pouze skladem
        </label>
      </div>
    </div>

    <!-- GRID -->
    <div data-grid class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      {sorted.map((entry) => (
        <ProductCard product={{ id: entry.slug, ...entry.data }} />
      ))}
    </div>
  </section>

  <script type="module" src="/js/filters.js"></script>


</Base>
